JSON.stringify(firstFormData);console.log(firstFormData);formData=firstFormData;$(document).ready(function(){function b(){$.post("/store/search",formData,function(m){var k=m.resultMap.searchList;var l=m.resultMap.allSearchNum;var g="";$("#game-list").empty();if(m.status==0){return}for(var f=0;f<k.length;f++){var n=k[f];var o=(parseFloat(n.gprice)*(parseFloat(n.discount))).toString();if(o.length>6){o.substr(0,6)}var p=n.gtype;p=(p!=null?p.substring(1,p.length-1):"");p=p.split(",");var d=n.language;d=(d!=null?d.substring(1,d.length-1):"");d=d.split(",");for(var e=0;e<d.length;e++){d[e].substring(1,d[e].length-1)}g+="<li><a href=game_detail.html?gid=game.gid class=game-click><div class=left><img src="+n.phref+"></div><div class=right>";if(n.discount!=1&&n.discount!=null){g+="<span class=game-discount>"+n.discount+"</span><span class=game-origin-price>￥"+n.gprice+"</span>"}g+="<span class=game-sale-price>￥"+o+"</span></div><div class=middle><p class=title>"+n.gname;if(n.discount!=1){g+="<span class=title-tag>促销</span>"}var h=false;for(var c=0;c<d.length;c++){if(d[c]==='"中文"'&&d.length==1){g+="<span class=title-area>中国站</span>";h=true;break}}if(!h){g+="<span class=title-area>国际站</span>"}g+="</p><p class='date'>发行于"+(n.realeasedate!=null?n.realeasedate.substring(0,10):" ")+"</p><p class='tags'>";console.log(g);for(e=0;e<p.length;e++){g+="<span class=tag-block>"+(p[e]!=null?p[e].substring(1,p[e].length-1):" ")+"</span>"}g+="</p></div></a></li>"}$("#game-list").html(g);a(l)})}function a(c){console.log("pagenumber= "+c);var e="";if(c===0){$(".pagination").html("");return}for(var d=0;d<c;d++){if(d===parseInt(pageIndex/10)){e+='<button class="page-item active-button">'+parseInt(d+1).toString()+"</button>"}else{e+='<button class="page-item">'+parseInt(d+1).toString()+"</button>"}}$(".page-list").empty();$(".page-list").html(e)}$(document).on("click",".page-item",function(){console.log($(this).text());pageIndex=(parseInt($(this).text())-1)*10;console.log("pageIndex is "+pageIndex);let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b();$(".active-button").removeClass("active-button");$(this).addClass("active-button")});$(document).on("click",".game-sort-order",function(){pageIndex=0;if(this.innerText==="全部"){sort=""}else{if(this.innerText==="折扣"){sort="discount"}else{if(this.innerText==="最新"){sort="new"}else{if(this.innerText==="评分"){sort="score"}else{sort="price"}}}}if(sort==="price"){if(price_sort==0){price_sort=1}else{price_sort=0}if(price_sort==1){order="desc";$(".fa").text("▲")}else{order="asc";$(".fa").text("▼")}console.log("价格的排序方法是"+price_sort);let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()}else{let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()}$(".active").removeClass("active");$(this).addClass("active")});$(document).on("click",".tags-block-wrapper",function(){var c=$(this).text();var e=c[0];if(e=="√"){var d=c;$(this).text((d!=null?d.substring(1,d.length):""));category.splice($.inArray($(this).text(),category),1);console.log("category= "+$(this).text())}else{category.push(c);c="√"+c;$(this).text(c)}let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()});$(document).on("click",".tags-block-wrapper1",function(){var c=$(this).text();var d=c;var f=c[0];if(f=="√"){var e=c;$(this).text((e!=null?e.substring(1,e.length):""));tag.splice($.inArray($(this).text(),tag),1);console.log("tag= "+$(this).text())}else{if(c=="预售游戏"){c="presale"}else{if(c=="新品游戏"){c="newsale"}else{c="promotion"}}tag.push(c);c="√"+d;$(this).text(c)}let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}formData=thisFormData;b()});$(document).on("click",".tags-block-wrapper2",function(){var c=$(this).text();if(c[0]!="√"){for(var d=17;d<=20;d++){var e=$("#fa"+d).text();if(e[0]=="√"){$("#fa"+d).text(e.substring(1,e.length))}}$(this).text("√"+c)}switch($(this).text()){case"√￥0-10":minPrice=0;maxPrice=10;break;case"√￥11-50":minPrice=11;maxPrice=50;break;case"√￥51-100":minPrice=51;maxPrice=100;break;case"√>=￥101":minPrice=100;maxPrice=10000;break;default:break}let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()});$(document).on("click",".tags-block-wrapper4",function(){var c=$(this).text();if(c[0]!="√"){for(var d=21;d<=22;d++){var e=$("#fa"+d).text();if(e[0]=="√"){$("#fa"+d).text(e.substr(1,e.length))}}$(this).text("√"+c)}switch($(this).text()){case"√中国站":area="China";break;case"√国际站":area="other";break;default:break}let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()});$(document).on("click",".tags-block-wrapper3",function(){var c=$(this).text();if(c[0]!="√"){for(var d=15;d<=16;d++){var e=$("#fa"+d).text();if(e[0]=="√"){$("#fa"+d).text(e.substring(1,e.length))}}$(this).text("√"+c)}switch($(this).text()){case"√中文":language="Chinese";break;case"√英文":language="other";break;default:break}let thisFormData={sort:sort,pageIndex:pageIndex,order:order,category:JSON.stringify(category),tag:JSON.stringify(tag),minPrice:minPrice,maxPrice:maxPrice,area:area,language:language}JSON.stringify(thisFormData);formData=thisFormData;b()});b()});