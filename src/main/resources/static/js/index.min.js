$(document).ready(function(){isLogin();setAClickListener();setSearchFormValidateLisener();$("nav.navbar ul.navbar-nav:first-of-type > li:first-of-type").addClass("active");index_body()});function isLogin(){$.get(requestmap.user_isLogged,function(a){if(a.status===1){console.log("获取的已登录用户信息:");console.log(a);userInfo=a.resultMap.loggedUserInfo;$("nav.navbar ul.navbar-right:eq(1)").hide();$("nav.navbar ul.navbar-right:eq(0)").show();$("#index-navbar-ualias").text(userInfo.ualias);$("#index-navbar-uavatar").attr("src",userInfo.uavatar)}else{$("nav.navbar ul.navbar-right:eq(1)").show();$("nav.navbar ul.navbar-right:eq(0)").hide()}})}function setSearchFormValidateLisener(){$("#navbar-search-form").bootstrapValidator({message:"*输入不合法",feedbackIcons:{valid:"glyphicon glyphicon-ok",invalid:"glyphicon glyphicon-remove",validating:"glyphicon glyphicon-refresh"},fields:{"navbar-search-form-keyword-input":{message:"*关键字不合法",validators:{callback:{callback:function(){return true}}}}}}).on("success.form.bv",function(a){a.preventDefault();$("#navbar-search-form-submit-button").button("loading");let keywords=$("#navbar-search-form-keyword-input").val();keywords=keywords||"";console.log("保存搜索内容: "+keywords);$.get(requestmap.store_search,{keywords:keywords},function(b){if(b.code===1){console.log("搜索到相关信息进行显示");console.log(b)}else{console.log("搜索结果为空")}$("#navbar-search-form-submit-button").button("reset")})})}function setAClickListener(){$("nav.navbar ul.navbar-nav:eq(0) > li > a").on("click",function(){$("nav.navbar ul.navbar-nav > li").removeClass("active");$(this).parent().addClass("active");if($(this).text()!=="首页"){uposition[0]=$(this).text()}updateBreadcrumb()});$("nav.navbar ul.navbar-right:eq(1) > li > a").on("click",function(){$("nav.navbar ul.navbar-nav > li").removeClass("active");$(this).parent().addClass("active");uposition[0]=$(this).text();updateBreadcrumb()});$("nav.navbar ul.navbar-right:eq(0) > li > ul.dropdown-menu a.dropdown-item").on("click",function(){$("nav.navbar ul.navbar-nav > li").removeClass("active");uposition[0]="我的信息";updateBreadcrumb()})}function updateBreadcrumb(){console.log("更新面包屑导航地址")}function user_login(){if($("#"+static_components.component_user_login.cid).length===0){loadingAnimation("#body-container").then(function(){$.get(static_components.component_user_login.curl,function(a){if(a!==undefined||a!==""){$("#body-container").html(a)}else{ajaxNoContent("#body-container")}}).fail(function(){ajaxFailed("#body-container")})})}}function user_register(){if($("#"+static_components.component_user_register.cid).length===0){loadingAnimation("#body-container").then(function(){$.get(static_components.component_user_register.curl,function(a){if(a!==undefined||a!==""){$("#body-container").html(a)}else{ajaxNoContent("#body-container")}}).fail(function(){ajaxFailed("#body-container")})})}}function index_body(){if($("#"+static_components.component_index.cid).length===0){loadingAnimation("#body-container").then(function(){$.get(static_components.component_index.curl,function(a){if(a!==undefined||a!==""){$("#body-container").html(a)}else{ajaxNoContent("#body-container")}}).fail(function(){ajaxFailed("#body-container")})})}}function showAllGame(){if($("#"+static_components.component_all_game.cid).length===0){loadingAnimation("#body-container").then(function(){$.get(static_components.component_all_game.curl,function(a){if(a!==undefined||a!==""){$("#body-container").html(a)}else{ajaxNoContent("#body-container")}}).fail(function(){ajaxFailed("#body-container")})})}};